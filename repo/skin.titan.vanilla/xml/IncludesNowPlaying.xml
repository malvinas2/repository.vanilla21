<?xml version="1.0" encoding="utf-8"?>
<!--Titan-->
<includes>

	<include name="NowPlayingModern">
		<include condition="!Skin.HasSetting(DisableNowPlayingBackground)">NowPlayingBackground</include>
        <include condition="!Skin.HasSetting(DisableNowPlayingInfoBar)">NowPlayingInfoBar</include>
    </include>
	
    <include name="NowPlayingInfoBar">
        <control type="group" id="88888">
            <!--Panel-->
            <visible>!Skin.HasSetting(DisableNowPlayingInfoBar)</visible>
            <visible>!Window.IsActive(notification) + !Window.IsActive(pvrguidecontrols) + !Window.IsActive(extendedprogressdialog) + !ControlGroup(400).HasFocus() + !Control.IsVisible(77551)</visible>
			<visible>[[Player.HasVideo + !String.IsEmpty(VideoPlayer.Title)] | [Player.HasAudio + !String.IsEmpty(MusicPlayer.Title)] | Player.IsInternetStream]</visible>
			<!-- <visible>String.IsEmpty(Window(10025).Property(PlayingBackgroundMedia)) + String.IsEmpty(Window(Home).Property(TrailerPlaying))</visible> -->
			<visible>String.IsEmpty(Window(Home).Property(TrailerPlaying))</visible>
			<visible>String.IsEmpty(Window(10025).Property(PlayingBackgroundMedia)) | VideoPlayer.Content(livetv) | VideoPlayer.Content(movies) | VideoPlayer.Content(episodes) | VideoPlayer.Content(musicvideos) | MusicPlayer.Content(livetv)</visible>
			<include>DimensionsFullscreen</include>
			<animation effect="slide" start="0,-400" end="0,0" tween="cubic" easing="out" delay="0" time="250" reversible="false">Visible</animation>
			<animation effect="slide" start="0,0" end="0,-400" tween="cubic" easing="out" delay="0" time="250" reversible="false">Hidden</animation>
			
            <control type="image">
				<left>0</left>
				<top>-5</top>
				<width>100%</width>
				<height>145</height>
				<texture border="5">diffuse/panel.png</texture>
				<colordiffuse>$INFO[Skin.String(GeneralPanelsColor)]</colordiffuse>
			</control>
            <control type="label">
                <!--Now Playing-->
                <left>310</left>
                <top>15</top>
                <width>885</width>
                <align>left</align>
                <font>Reg28</font>
                <textcolor>$INFO[Skin.String(GeneralTextColor)]</textcolor>
                <label>$VAR[NowPlayingLabel]</label>
            </control>
            <control type="label">
                <!--Title-->
                <left>310</left>
                <top>70</top>
                <width>1150</width>
                <align>left</align>
                <font>Bold45</font>
                <textcolor>$INFO[Skin.String(GeneralTextColor)]</textcolor>
                <label>$VAR[NowPlayingTitle]</label>
                <scroll>false</scroll>
            </control>
            
            <!-- AUDIO COVER + DISCART -->
            <control type="group">
                <visible>Player.HasAudio</visible>
                <!-- cd cover -->
                <control type="image">
                    <left>110</left>
                    <top>10</top>
                    <width>123</width>
                    <height>123</height>
                    <aligny>center</aligny>
                    <aspectratio scalediffuse="false" align="center" aligny="center">scale</aspectratio>
                    <fadetime>300</fadetime>
                    <animation effect="rotate" end="-360" center="auto" time="4800" loop="true" reversible="false" condition="!Player.Paused">Conditional</animation>
                    <texture background="true" fallback="defaultcovers/cd_small.png" diffuse="diffuse/cdmask_small_new.png">$VAR[PlayerDiscArtImage]</texture>
                    <visible>!Skin.HasSetting(DisableNowPlayingDiscArt)</visible>
                </control>
                <control type="image">
                    <!--Music bg-->
                    <left>60</left>
                    <top>10</top>
                    <width>123</width>
                    <height>123</height>
                    <fadetime>200</fadetime>
                    <aspectratio scalediffuse="true" align="center" aligny="center">stretch</aspectratio>
                    <texture border="5">diffuse/music_cover_cd.png</texture>
                    <colordiffuse>$INFO[Skin.String(GeneralPanelsColor)]</colordiffuse>
                </control>
                <control type="image" id="13333">
                    <!--music cover-->
                    <left>60</left>
                    <top>10</top>
                    <width>123</width>
                    <height>123</height>
                    <fadetime>200</fadetime>
                    <texture background="true" diffuse="diffuse/music_cover_cd.png" border="5" fallback="DefaultMusicSongs.png">$VAR[AudioPlayerCoverImage]</texture>
                    <visible>!Skin.HasSetting(DisableNowPlayingDiscArt)</visible>
                </control>
                <control type="image">
                    <!--music cover-->
                    <left>60</left>
                    <top>10</top>
                    <width>123</width>
                    <height>123</height>
                    <fadetime>200</fadetime>
                    <texture background="true" fallback="DefaultMusicSongs.png">$VAR[AudioPlayerCoverImage]</texture>
                    <visible>Skin.HasSetting(DisableNowPlayingDiscArt)</visible>
                </control>
            </control>
            
            <!-- VIDEO COVER -->
            <control type="group">
                <visible>Player.HasVideo</visible>
                <control type="image">
                    <left>85</left>
                    <top>10</top>
                    <width>123</width>
                    <height>123</height>
                    <aligny>center</aligny>
                    <aspectratio scalediffuse="false" align="center" aligny="center">scale</aspectratio>
                    <fadetime>300</fadetime>
                    <animation effect="rotate" end="-360" center="auto" time="4800" loop="true" reversible="false" condition="!Player.Paused">Conditional</animation>
                    <texture background="true" fallback="defaultcovers/cd_small.png" diffuse="diffuse/cdmask_small_new.png">$VAR[PlayerDiscArtImage]</texture>
                    <visible>!Skin.HasSetting(DisableNowPlayingDiscArt) + [!String.IsEmpty(Player.Art(poster)) | !String.IsEmpty(Player.Art(tvshow.poster))]</visible>
                </control>
                <control type="image">
                    <!--Cover image-->
                    <left>60</left>
                    <top>5</top>
                    <width>240</width>
                    <height>130</height>
                    <fadetime>200</fadetime>
                    <texture background="true">$VAR[VideoPlayerPoster]</texture>
                    <aspectratio align="left" aligny="center">keep</aspectratio>
                </control>
            </control>
            
			<!-- hidden button to go fullscreen on click -->
			<control type="button">
				<left>-60</left>
				<top>-20</top>
				<width>2040</width>
				<height>180</height>
				<align>center</align>
				<aligny>center</aligny>
				<font>Light28</font>
				<label></label>
				<textcolor></textcolor>
				<focusedcolor></focusedcolor>
				<disabledcolor></disabledcolor>
				<texturefocus></texturefocus>
				<texturenofocus></texturenofocus>
				<onclick condition="Player.HasAudio">ActivateWindow(visualisation)</onclick>
				<onclick condition="Player.HasVideo">ActivateWindow(fullscreenvideo)</onclick>
			</control>
            <!-- clearart -->
            <control type="image" id="884455">
				<left></left>
				<right>60</right>
                <top>5</top>
				<width>300</width>
				<height>130</height>
				<fadetime>200</fadetime>
				<texture background="true">$VAR[VideoPlayerClearart]</texture>
				<aspectratio align="right" aligny="center">keep</aspectratio>
                <visible>!Skin.HasSetting(EnableTouchSupport)</visible>
				<visible>!String.IsEmpty(Control.GetLabel(884455)) + !Skin.HasSetting(DisableNowPlayingClearArt)</visible>
			</control>
            
            <!-- clock -->
            <control type="group">
                <animation type="Conditional" condition="Window.IsActive(volumebar)">
                    <effect type="slide" start="0,0" end="-120,0" time="400" tween="cubic" easing="inout" delay="0" />
                </animation>
                <visible>!Skin.HasSetting(EnableTouchSupport) + !Control.IsVisible(884455) + !Skin.HasSetting(DisableNowPlayingClock)</visible>
                <control type="grouplist">
                    <!--Time Grouplist Line 1-->
                    <left>1260</left>
                    <top>10</top>
                    <width>600</width>
                    <height>100</height>
                    <align>right</align>
                    <itemgap>4</itemgap>
                    <orientation>horizontal</orientation>
                    <usecontrolcoords>true</usecontrolcoords>
                    <control type="label">
                        <!--Time-->
                        <width min="0" max="300">auto</width>
                        <height>100</height>
                        <info>System.Time(hh:mm)</info>
                        <font>Bold55</font>
                        <textcolor>$INFO[Skin.String(GeneralTextColor)]</textcolor>
                    </control>
                    <control type="label">
                        <!--AM-->
                        <visible>String.EndsWith(system.time,AM)</visible>
                        <width min="0" max="150">auto</width>
                        <height>100</height>
                        <label>$LOCALIZE[378]</label>
                        <font>Bold55</font>
                        <textcolor>$INFO[Skin.String(GeneralTextColor)]</textcolor>
                    </control>
                    <control type="label">
                        <!--PM-->
                        <visible>String.EndsWith(system.time,PM)</visible>
                        <width min="0" max="150">auto</width>
                        <height>100</height>
                        <label>$LOCALIZE[379]</label>
                        <font>Bold55</font>
                        <textcolor>$INFO[Skin.String(GeneralTextColor)]</textcolor>
                    </control>
                </control>
                <control type="grouplist">
                    <!--Date Grouplist Line 2-->
                    <left>1260</left>
                    <top>85</top>
                    <width>600</width>
                    <height>50</height>
                    <align>right</align>
                    <itemgap>4</itemgap>
                    <orientation>horizontal</orientation>
                    <usecontrolcoords>true</usecontrolcoords>
                    <control type="label">
                        <!--Day-->
                        <width min="0" max="400">auto</width>
                        <height>50</height>
                        <info>System.Date(DDD)</info>
                        <font>Reg30</font>
                        <textcolor>$INFO[Skin.String(GeneralTextColor)]</textcolor>
                    </control>
                    <control type="label">
                        <width min="0" max="400">auto</width>
                        <height>50</height>
                        <label>, </label>
                        <font>Reg30</font>
                        <textcolor>$INFO[Skin.String(GeneralTextColor)]</textcolor>
                    </control>
                    <control type="label">
                        <!--Date-->
                        <width min="0" max="400">auto</width>
                        <height>50</height>
                        <info>System.Date(d)</info>
                        <font>Reg30</font>
                        <textcolor>$INFO[Skin.String(GeneralTextColor)]</textcolor>
                    </control>
                    <control type="label">
                        <visible>String.Contains(System.Language,German)</visible>
                        <width min="0" max="400">auto</width>
                        <height>50</height>
                        <label>. </label>
                        <font>Reg30</font>
                        <textcolor>$INFO[Skin.String(GeneralTextColor)]</textcolor>
                    </control>
                    <control type="label">
                        <label></label>
                        <visible>!String.Contains(System.Language,German)</visible>
                        <width min="0" max="400">auto</width>
                        <height>50</height>
                        <font>Reg30</font>
                        <textcolor>$INFO[Skin.String(GeneralTextColor)]</textcolor>
                    </control>
                    <control type="label">
                        <!--Month-->
                        <width min="0" max="400">auto</width>
                        <height>50</height>
                        <info>System.Date(MMM)</info>
                        <font>Reg30</font>
                        <textcolor>$INFO[Skin.String(GeneralTextColor)]</textcolor>
                    </control>
                </control>
            </control>
            <!-- OSD for touch mode -->
			<control type="grouplist">
                <!--OSD-->
                <right>60</right>
                <top>55</top>
                <width>280</width>
                <height>130</height>
                <itemgap>0</itemgap>
				<visible>Skin.HasSetting(EnableTouchSupport)</visible>
                <orientation>horizontal</orientation>
                <control type="togglebutton">
                    <!--Skip Back-->
                    <!--visible>ControlGroup(20).HasFocus()</visible-->
                    <include>animation_fade_visible_hidden</include>
                    <width>70</width>
                    <height>70</height>
                    <label>$LOCALIZE[210]</label>
                    <font></font>
                    <texturefocus colordiffuse="$INFO[Skin.String(OSDButtonsFocusColor)]">osd/rounded/prevtrack.png</texturefocus>
                    <texturenofocus colordiffuse="$INFO[Skin.String(OSDButtonsColor)]">osd/rounded/prevtrack.png</texturenofocus>
                    <usealttexture>VideoPlayer.Content(livetv)</usealttexture>
                    <alttexturefocus colordiffuse="$INFO[Skin.String(OSDButtonsFocusColor)]">osd/rounded/channeldown.png</alttexturefocus>
                    <alttexturenofocus colordiffuse="$INFO[Skin.String(OSDButtonsColor)]">osd/rounded/channeldown.png</alttexturenofocus>
                    <!-- <onclick>PlayerControl(Previous)</onclick> -->
					<onclick condition="!Player.HasAudio + VideoPlayer.Content(livetv) + !Player.SeekEnabled">ChannelDown</onclick>
					<onclick condition="Player.HasAudio">PlayerControl(Previous)</onclick>
					<onclick condition="!Player.HasAudio + [!VideoPlayer.Content(livetv) | [VideoPlayer.Content(livetv) + Player.SeekEnabled]]">ChapterOrBigStepBack</onclick>
                </control>
                <control type="togglebutton">
                    <label></label>
                    <altlabel></altlabel>
                    <include>animation_fade_visible_hidden</include>
                    <width>70</width>
                    <height>70</height>
                    <font></font>
                    <texturefocus colordiffuse="$INFO[Skin.String(OSDButtonsFocusColor)]">osd/rounded/pause.png</texturefocus>
                    <texturenofocus colordiffuse="$INFO[Skin.String(OSDButtonsColor)]">osd/rounded/pause.png</texturenofocus>
                    <usealttexture>Player.Paused | Player.Forwarding | Player.Rewinding</usealttexture>
                    <alttexturefocus colordiffuse="$INFO[Skin.String(OSDButtonsFocusColor)]">osd/rounded/play.png</alttexturefocus>
                    <alttexturenofocus colordiffuse="$INFO[Skin.String(OSDButtonsColor)]">osd/rounded/play.png</alttexturenofocus>
                    <onclick>PlayerControl(Play)</onclick>
                </control>
                <control type="button">
                    <label></label>
                    <!--Stop-->
                    <include>animation_fade_visible_hidden</include>
                    <width>70</width>
                    <height>70</height>
                    <font></font>
                    <texturefocus colordiffuse="$INFO[Skin.String(OSDButtonsFocusColor)]">osd/rounded/stop.png</texturefocus>
                    <texturenofocus colordiffuse="$INFO[Skin.String(OSDButtonsColor)]">osd/rounded/stop.png</texturenofocus>
                    <onclick>PlayerControl(Stop)</onclick>
                </control>
                <control type="togglebutton">
                    <!--Next-->
                    <include>animation_fade_visible_hidden</include>
                    <width>70</width>
                    <height>70</height>
                    <label>$LOCALIZE[209]</label>
                    <font></font>
                    <texturefocus colordiffuse="$INFO[Skin.String(OSDButtonsFocusColor)]">osd/rounded/nexttrack.png</texturefocus>
                    <texturenofocus colordiffuse="$INFO[Skin.String(OSDButtonsColor)]">osd/rounded/nexttrack.png</texturenofocus>
                    <usealttexture>VideoPlayer.Content(livetv)</usealttexture>
                    <alttexturefocus colordiffuse="$INFO[Skin.String(OSDButtonsFocusColor)]">osd/rounded/channelup.png</alttexturefocus>
                    <alttexturenofocus colordiffuse="$INFO[Skin.String(OSDButtonsColor)]">osd/rounded/channelup.png</alttexturenofocus>
                    <!-- <onclick>PlayerControl(Next)</onclick> -->
					<onclick condition="!Player.HasAudio + VideoPlayer.Content(livetv) + !Player.SeekEnabled">ChannelUp</onclick>
					<onclick condition="Player.HasAudio">PlayerControl(Next)</onclick>
					<onclick condition="!Player.HasAudio + [!VideoPlayer.Content(livetv) | [VideoPlayer.Content(livetv) + Player.SeekEnabled]]">ChapterOrBigStepForward</onclick>
                </control>
            </control>
 		</control>
     </include>
    
    <include name="NowPlayingBackground">
        <control type="group">
            <visible>Player.HasMedia + !Control.IsVisible(507)</visible>
            <visible>![!String.IsEmpty(Window(10025).Property(PlayingBackgroundMedia)) + Player.HasAudio]</visible>
            <visible>!String.IsEqual(Window(Home).Property(TrailerPlaying),windowed)</visible>
            <include condition="!Skin.HasSetting(DisableNowPlayingBackground) | !String.IsEmpty(Window(home).Property(pvrGuideOnFullscreenVideo))">NowPlayingVideoBackground</include>
            <include condition="![Skin.HasSetting(DisableNowPlayingMusicBackground) + !Window.IsActive(visualisation)]">NowPlayingMusicBackground</include>
            
            <!--Background Overlay-->
            <control type="group">
                <visible>![Window.IsActive(tvguide) + !String.IsEmpty(Window(Home).Property(pvrGuideOnFullscreenVideo))] + !Window.IsActive(visualisation)</visible>
                <visible>[Player.HasAudio + !Skin.HasSetting(DisableNowPlayingMusicBackground)] | [Player.HasVideo + !Skin.HasSetting(DisableNowPlayingBackground)]</visible>
				<control type="image">
					<description>panel diffuse bg</description>
                    <include>DimensionsFullscreen</include>
                    <texture>colors/color_white.png</texture>
                    <visible>!Window.IsActive(visualisation)</visible>
                    <colordiffuse>$INFO[Skin.String(BackgroundDiffuseColor.base)]</colordiffuse>
                    <visible>Skin.String(BackgroundDiffuseColor) + !Skin.String(BackgroundDiffuseColor, None)</visible>
                    <visible>!Window.IsActive(visualisation)</visible>
                    <animation effect="fade" start="100" end="80" time="150" condition="true">Conditional</animation>
                </control>
                <include>DialogOverlay</include>
            </control>
        </control>
    </include>
    
    <include name="NowPlayingMusicBackground">
        <control type="group">
            <visible>Player.HasAudio + String.IsEmpty(Window(Home).Property(PlayingBackgroundMedia))</visible>
            <control type="visualisation" id="2">
                <description>visualisation</description>
                <include>DimensionsFullscreen</include>
                <visible>Visualisation.Enabled + ![String.IsEqual(Visualisation.Name,waveform) | String.IsEqual(Visualisation.Name,opengl spectrum) | String.IsEqual(Visualisation.Name,directx spectrum)] + !String.IsEmpty(Visualisation.Name) + !String.IsEqual(Visualisation.Name,None)</visible>
            </control>
            <!-- music fanart -->
            <control type="multiimage" id="3333">
                <aspectratio>scale</aspectratio>
                <include>DimensionsFullscreen</include>
                <timeperimage>20000</timeperimage>
                <randomize>true</randomize>
                <fadetime>600</fadetime>
                <loop>yes</loop>
                <imagepath background="true">$VAR[music_fanart]</imagepath>
                <animation effect="fade" start="100" end="20" time="0" condition="Visualisation.Enabled + ![String.IsEqual(Visualisation.Name,waveform) | String.IsEqual(Visualisation.Name,opengl spectrum) | String.IsEqual(Visualisation.Name,directx spectrum)] + !String.IsEmpty(Visualisation.Name) + !String.IsEqual(Visualisation.Name,None)">Conditional</animation>
                <animation effect="zoom" start="110" end="130" center="auto" time="15000" tween="cubic" easing="inout" pulse="true" condition="Skin.HasSetting(animateMusicArt)">Conditional</animation>
                <animation effect="slide" start="-10,-10" end="10,10" time="8000" tween="cubic" easing="inout" pulse="true" condition="Skin.HasSetting(animateMusicArt)">Conditional</animation>
            </control>

            <control type="visualisation" id="2">
                <description>visualisation</description>
                <include>DimensionsFullscreen</include>
                <visible>Visualisation.Enabled + [String.IsEqual(Visualisation.Name,waveform) | String.IsEqual(Visualisation.Name,opengl spectrum) | String.IsEqual(Visualisation.Name,directx spectrum)]</visible>
            </control>
        </control>
    </include>
    
	<include name="NowPlayingVideoBackground">
		<control type="group">
            <visible>Player.HasVideo</visible>
            
            <!-- black background -->
            <control type="image">
                <include>DimensionsFullscreen</include>
                <texture>colors/color_black.png</texture>
            </control>
            
			<control type="videowindow">
				<include>DimensionsFullscreen</include>
			</control>
            
		</control>
	</include>
    
    <variable name="music_fanart">
        <value condition="Skin.String(MusicArtistFanart,slideshow) + !String.IsEmpty(Window(Home).Property(SkinHelper.Player.Art.ExtraFanArt))">$INFO[Window(Home).Property(SkinHelper.Player.Art.ExtraFanArt)]</value>
        <value condition="Skin.String(MusicArtistFanart,artistslideshow) + !String.IsEmpty(Window(Visualisation).Property(ArtistSlideshow.Image))">$INFO[Window(Visualisation).Property(ArtistSlideshow.Image)]</value>
		<value condition="!Skin.String(MusicArtistFanart,disabled) + !String.IsEmpty(Player.Art(fanart))">$INFO[Player.Art(fanart)]</value>
        <value condition="!Skin.String(MusicArtistFanart,disabled) + !String.IsEmpty(Window(Home).Property(SkinHelper.Player.Art.FanArt))">$INFO[Window(Home).Property(SkinHelper.Player.Art.FanArt)]</value>
        <value condition="String.Contains(Skin.String(MusicBackground),VAR)">$VAR[MusicBackground]</value>
        <value condition="Skin.String(MusicBackground)">$INFO[Skin.String(MusicBackground)]</value>
        <value>colors/color_black.png</value>
    </variable>
	
</includes>